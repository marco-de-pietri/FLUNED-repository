# FLUNED-Repository

This repository includes two tools for the simulation of activated water in fusion installations.

The first one is FLUNED, a tool that allow the mesh-based activation calculation at the component level.

The second one is FLUNED-SL, a tool that allows performing its calculation at the system level in networks piping systems.

More detail on the usage, installation and testing is provided below.

For additional information contact: mdepietri@ind.uned.es
## FLUNED

FLUNED is a tool for the simulation of the transport within water of radio-isotope generated by nuclear fusion neutrons.

The tool takes as input a finished hydro-dynamic simulation performed with the code ANSYS FLUENT or OpenFOAM and creates a passive scalar simulation of the radio-isotope concentration.

For simulating cases of irradiated fluid, the information relative to the radio-isotope generation can be provided through a vtk file or by providing a uniform, constant value.

The physics implemented is rather simple and has some limitations however it has been positively validated for water studies with the experimental neutron and photon data generated in the FNG water activaton experiment run in 2019 (_angeloneMeasurementDelayedNeutron2020_ [1], _nobsComputationalEvaluationN162020_ [2])

A paper describing its development and validation can be found in [3]

[1]doi: 10.1016/j.fusengdes.2020.111998\
[2]doi: 10.1016/j.fusengdes.2020.111743\
[3]doi: 10.1016/j.cpc.2023.108807

## Requirements

 - linux environment
 - OpenFOAM v10 (from openfoam.org)
 - python v3.11

## Installation

Once the requirements are satisfied, the pre-processor and post-processor scripts can be installed with a python dependency manager of choice. The required python packages are listed in the requirements.txt file.

The FLUNED-solver can be installed by using the ad-hoc OpenFOAM compiler, launching the following command in the FLUNED-solver folder:

```
wmake
```

## Usage

The pre/post-processor scripts and the solver are designed to simplify the user simulation process. From the command line in the folder where the Ansys - FLUENT or OpenFOAM files are located the following workflow is recommended.

 1.	Generate the FLUNED input:

 ```
 fluned -t
 ```

 2.	Modify the input_template file with the appropriate parameters. The file will contain the default values together with the available options.

 3.	Launch the FLUNED pre-processor:

 ```
 fluned -i input-file
 ```

This will create a folder named as the FLUNED case reported in the input file. The created simulation files follow the OpenFOAM structure, therefore some additional tweaking in the simulation parameters can be done if the user has some previous knowledge of the OpenFOAM code. Thanks to the modularity of the OpenFOAM classes, FLUNED simulations can be natively run in parallel using the appropriate OpenFOAM commands.

4.	In the FLUNED case folder launch the solver by running:

```
FLUNED-solver
```

5.	Once the simulation is finished, the post-processor can be launched in the simulation folder by running:

```
flunedPost
```

## Tests

A set of tests are present in the tests folder. These cases are very simple and have no physical accuracy, are just meant to test the integrated working of the scripts functionalities.
To run these execute the following commands from a bash shell inside the tests folder:

1. Run the test suite.

```
./run_tests.sh
```

2. Run the post processing script for the tests simulations:

```
./run_post.sh
```

3. Run a script that executes the comparison between the test results and the expected results. This comparison will be written in the test_results file
```
./eval_results.sh
```

4. Clean the created files
```
./clean_tests.sh
```

## LICENSE
FLUNED is an open-source software licensed under the [GNU GPLv3](./LICENSE) license.
